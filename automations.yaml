
#####################################################  Led Pasik Kuchyna  
- id: Kuchyna - Zapni led pasik pri pohybe a 90Lux - Noc
  alias: Kuchyna - Zapni led pasik pri pohybe a 90Lux - Noc
  mode: restart  
  trigger:
  - platform: state
    entity_id: binary_sensor.0x54ef4410005a9493_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.everything_presence_lite_07c65c_zone_1_occupancy  
    to: 'on'    
  condition:
  - condition: numeric_state
    entity_id: sensor.0x54ef4410005a9493_illuminance
    below: 90
  - condition: time
    after: "23:30:00"
    before: "07:00:00"   
  - condition: state
    entity_id: group.kuchyna
    state: 'off'    
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled_3
      effect: "Solid"
      brightness: '10'
      rgb_color: [255,255,255]        

        
- id: Kuchyna - Zapni led pasik pri pohybe a 90Lux - Den
  alias: Kuchyna - Zapni led pasik pri pohybe a 90Lux - Den
  mode: restart  
  trigger:
  - platform: state
    entity_id: binary_sensor.0x54ef4410005a9493_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.everything_presence_lite_07c65c_zone_1_occupancy 
    to: 'on'      
  condition:
  - condition: numeric_state
    entity_id: sensor.0x54ef4410005a9493_illuminance
    below: 90
  - condition: time
    after: "07:01:00"
    before: "23:29:58" 
  - condition: state
    entity_id: group.kuchyna
    state: 'off'      
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled_3
      effect: "Solid"
      brightness: '250'
      rgbw_color: [255,255,255,255]       

- id: Kuchyna - Vypni led pasik bez pohybu
  alias: Kuchyna - Vypni led pasik bez pohybu
  mode: restart  
  trigger:
    - platform: state
      entity_id: 
        - binary_sensor.0x54ef4410005a9493_occupancy
        - binary_sensor.everything_presence_lite_07c65c_zone_1_occupancy
      to: 'off'
      for:
        seconds: 2  
  condition:
    - condition: state
      entity_id: binary_sensor.0x54ef4410005a9493_occupancy
      state: 'off'
    - condition: state
      entity_id: binary_sensor.everything_presence_lite_07c65c_zone_1_occupancy
      state: 'off'        
  action:
  - service: light.turn_off
    entity_id: light.wled_3
#########################################################################  Vypinace 
#####################################################  Vypinac Spalna   
- id: Vypinac Spalna Prave tlacidlo
  alias: Vypinac Spalna Prave tlacidlo zapina/vypina svetlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002b45642/action
      payload: "single_right"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: light.spalna_hlavne_svetlo
    
- id: Vypinac Spalna Lave tlacidlo
  alias: Vypinac Spalna Lave tlacidlo zapina/vypina svetlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002b45642/action
      payload: "single_left"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: light.postel_led_pasik_2
     
#####################################################  Vypinac Obyvacka  
- id: Vypinac Obyvacka Prave tlacidlo
  alias: Vypinac Obyvacka Prave tlacidlo zapina/vypina svetlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002afe6a9/action
      payload: "single_right"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: light.obyvacka_hlavne_svetlo
    
- id: Vypinac Obyvacka Lave tlacidlo
  alias: Vypinac Obyvacka Lave tlacidlo zapina/vypina svetlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002afe6a9/action
      payload: "single_left"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: group.vstupna_chodba
  
    
    
#####################################################  Vypinac Pracovna  
- id: Vypinac Pracovna Prave tlacidlo
  alias: Vypinac Pracovna Prave tlacidlo zapina/vypina svetlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d000650329f/action
      payload: "single_right"
      value_template: "{{ value }}"
  action:
    - service: light.toggle
      entity_id: light.pracovna_hlavne_svetlo
    


    
    
    
#####################################################  Chodba  
- id: Chodba Svetlo 8:00 - 22:00
  alias: Chodba Svetlo 8:00 - 22:00
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0004494467_occupancy  
    to: 'on'
  condition:
  - condition: time
    after: "08:00:00"
    before: '22:00:00'
  - condition: state
    entity_id: 
    - light.chodba_bodovka_1
    - light.chodba_bodovka_2
    - light.chodba_bodovka_3
    state: 'off'     
  action:
  - data:
      scene: '1'
    entity_id:
    - light.chodba_bodovka_1
    - light.chodba_bodovka_2
    - light.chodba_bodovka_3 
    service: xiaomi_miio.light_set_scene

- id: Chodba Svetlo 22:00 - 08:00
  alias: Chodba Svetlo 22:00 - 08:00
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0004494467_occupancy  
    to: 'on'
  condition:
  - condition: time
    after: "22:00:02"
    before: '07:59:59'
  - condition: state
    entity_id: 
    - light.chodba_bodovka_1
    - light.chodba_bodovka_2
    - light.chodba_bodovka_3
    state: 'off'     
  action:
  - data:
      scene: '4'
    entity_id:
    - light.chodba_bodovka_1
    - light.chodba_bodovka_2
    - light.chodba_bodovka_3    
    service: xiaomi_miio.light_set_scene    

- id: Chodba vypnutie svetla
  alias: Chodba vypnutie svetla
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0004494467_occupancy
    to: 'off'
    for:
      seconds: 21
  condition:
    - condition: state
      entity_id: binary_sensor.0x00158d0004494467_occupancy
      state: 'off'
  action:
  - service: light.turn_off
    entity_id: 
    - light.chodba_bodovka_1
    - light.chodba_bodovka_2
    - light.chodba_bodovka_3    
#####################################################  Vstupna Chodba  
- id: Vstupna Chodba Svetlo 8:00 - 22:00
  alias: Vstupna Chodba Svetlo 8:00 - 22:00
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0002753dcc_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.everything_presence_lite_6acba0_zone_1_occupancy 
    to: 'on'    
  condition:
  - condition: time
    after: "08:00:00"
    before: '22:00:00'
  - condition: state
    entity_id: 
    - light.vstupna_chodba_bodovka_1
    - light.vstupna_chodba_bodovka_2
    - light.vstupna_chodba_bodovka_3
    state: 'off'    
  action:
  - data:
      scene: '1'
    entity_id:
    - light.vstupna_chodba_bodovka_1
    - light.vstupna_chodba_bodovka_2
    - light.vstupna_chodba_bodovka_3    
    service: xiaomi_miio.light_set_scene


- id: Vstupna Chodba Svetlo 22:00 - 08:00
  alias: Vstupna Chodba Svetlo 22:00 - 08:00
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0002753dcc_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.everything_presence_lite_6acba0_zone_1_occupancy 
    to: 'on'     
  condition:
  - condition: time
    after: "22:00:02"
    before: '07:59:59'
  - condition: state
    entity_id: 
    - light.vstupna_chodba_bodovka_1
    - light.vstupna_chodba_bodovka_2
    - light.vstupna_chodba_bodovka_3
    state: 'off'     
  action:
  - data:
      scene: '4'
    entity_id:
    - light.vstupna_chodba_bodovka_1
    - light.vstupna_chodba_bodovka_2
    - light.vstupna_chodba_bodovka_3    
    service: xiaomi_miio.light_set_scene    



- id: Vstupna Chodba vypnutie svetla
  alias: Vstupna Chodba vypnutie svetla
  mode: restart
  trigger:
    - platform: state
      entity_id: 
        - binary_sensor.0x00158d0002753dcc_occupancy
        - binary_sensor.everything_presence_lite_6acba0_zone_1_occupancy
      to: 'off'
      for:
        seconds: 2
  condition:
    - condition: state
      entity_id: binary_sensor.0x00158d0002753dcc_occupancy
      state: 'off'
    - condition: state
      entity_id: binary_sensor.everything_presence_lite_6acba0_zone_1_occupancy
      state: 'off'
  action:
    - service: light.turn_off
      entity_id: 
          - light.vstupna_chodba_bodovka_1
          - light.vstupna_chodba_bodovka_2
          - light.vstupna_chodba_bodovka_3




   
    
#####################################################  Kupelna
- id: Kupelna Odsavanie Vlhkosti nad 80 percent
  alias: Kupelna Odsavanie Vlhkosti
  trigger:
  - entity_id: sensor.0x00158d0002d4786c_humidity
    platform: numeric_state
    above: '80'
  condition:
  - condition: state
    entity_id: switch.kupelna_ventilacka
    state: 'off'    
  action:
  - service: switch.turn_on
    entity_id: switch.kupelna_ventilacka
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Odsavanie sa zaplo o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna vlhkost je {{state_attr('sensor.0x00158d0002d4786c_humidity', 'humidity')}} %. "
      data: 
        ttl: 0
        priority: high      
    
- id: Kupelna Vypnutie odsavanie Vlhkosti - 75 percent
  alias: Kupelna Vypnutie odsavanie Vlhkosti - 75 percent
  trigger:
  - entity_id: sensor.0x00158d0002d4786c_humidity
    platform: numeric_state
    below: '75'
  condition:
  - condition: state
    entity_id: switch.kupelna_ventilacka
    state: 'on'
  action:
  - service: switch.turn_off    
    entity_id: switch.kupelna_ventilacka
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Odsavanie sa vyplo o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}. Aktualna vlhkost je {{state_attr('sensor.0x00158d0002d4786c_humidity', 'humidity')}} %. "
      data: 
        ttl: 0
        priority: high
        
######## Svetlo
- id: Kupelna Svetlo vypnutie po 60 min
  alias: Kupelna Svetlo vypnutie po 60 min
  mode: restart
  trigger:
  - platform: state  
    entity_id: switch.kupelna_svetlo
    to: 'on'
    for:
      minutes: 60
  action:
  - service: switch.turn_off  
    entity_id: switch.kupelna_svetlo           
      



#####################################################  TV Mode
- id: TV Mode Light
  alias: TV Mode Light
  trigger:
      - platform: sun
        event: 'sunset'
        offset: '-00:30:00'
  condition:
  - condition: state
    entity_id: media_player.samsung
    state: 'on'
  action:
#    - service: switch.turn_on
#      entity_id: switch.obyvacka_predlzovacka
#    - delay: 00:01:00  
    - service: light.turn_on
      entity_id: light.obyvacka_lampa
    - service: light.turn_off
      entity_id: light.obyvacka_hlavne_svetlo
#    - service: switch.turn_on
#      entity_id: switch.router_zasuvka   #stromcek  
#    - service: light.turn_on
#      data:
#       entity_id: light.wled_3
#       effect: "Flow"
#       brightness: 50    #vianocna parapeta     
#    - service: switch.turn_on 
#      entity_id: switch.stara_pracovna       #vianocny balkon
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "TV Mode Light automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"     
        data: 
          ttl: 0
          priority: high     
          
- id: TV Mode Light2
  alias: TV Mode Light2
  mode: restart
  trigger:
      - platform: state
        entity_id: media_player.samsung
        to: 'on'  
  condition:        
  - condition: sun
    after: sunset
    after_offset: '-00:30:00'
  action:
    - service: light.turn_on
      entity_id: light.obyvacka_lampa
    - service: light.turn_off
      entity_id: light.obyvacka_hlavne_svetlo
#    - service: switch.turn_on
#      entity_id: switch.router_zasuvka     #stromcek  
#    - service: light.turn_on
#      data:
#       entity_id: light.wled_3
#       effect: "Flow"
#       brightness: 50    #vianocna parapeta     
#    - service: switch.turn_on 
#      entity_id: switch.stara_pracovna       #vianocny balkon       
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "TV Mode Light2 automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"     
        data: 
          ttl: 0
          priority: high   
     
        
        
#####################################################  Vypnutie TV         
        
- id: Vypnutie TV vecer 00:01:00
  alias: Vypnutie TV vecer 00:01:00
  trigger:
  - at: "00:01:00"
    platform: time
  condition:
  - condition: state
    entity_id: media_player.samsung
    state: 'off'  
  action:
    - service: switch.turn_off
      entity_id: switch.tv_zasuvka
#    - service: switch.turn_off
#      entity_id: switch.obyvacka_predlzovacka 
      
#####################################################  Vypnutie Zone2 na zosilovaci         
        
- id: Vypnutie Zone2 na zosilovaci 
  alias: Vypnutie Zone2 na zosilovaci  
  trigger:
      - platform: state
        entity_id: media_player.denon_avr_x1600h
        to: 'off'        
  action:
    - delay: 00:00:02   
    - service: media_player.turn_off
      entity_id: media_player.denon_avr_x1600h_2
    
      
#####################################################  Vypnutie Satelitu ak je zapnuty Shield         
        
- id: Vypnutie Satelitu ak je zapnuty Shield 
  alias: Vypnutie Satelitu ak je zapnuty Shield 
  trigger:
      - platform: state
        entity_id: media_player.nvidia_shield
        from: 'off'   
        to: 'idle'
      - platform: state
        entity_id: media_player.nvidia_shield
        to: 'playing'    
  action:
    - service: media_player.turn_off
      entity_id: media_player.enigma2_media_player
      
        
#####################################################  Diana odchod z Prace  
  
- id: Diana odchod z Prace
  alias: Diana odchod z Prace
  trigger:
      - platform: zone
        event: leave
        zone: zone.diana_praca
        entity_id: device_tracker.samsung_s23
  action:
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Diana odisla z prace o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}" 
        data: 
          ttl: 0
          priority: high        
        
#####################################################  Zasuvky        
        
- id: Predlzovacka Vypnutie pod 2W
  alias: Predlzovacka Vypnutie pod 2W
  mode: restart
  trigger:
  - entity_id: sensor.obyvacka_predlzovacka_energy_power
    platform: numeric_state
    below: '2'
  condition:    
  - condition: state
    entity_id: switch.obyvacka_predlzovacka
    state: 'on'    
  action:
  - service: switch.turn_off    
    entity_id: switch.obyvacka_predlzovacka
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Predlzovacka sa vypla {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high      
      
        
# - id: Pracovna zasuvka Vypnutie pod 5.5W
  # alias: Pracovna zasuvka Vypnutie pod 5.5W
  # mode: restart
  # trigger:
  # - entity_id: sensor.pracovna_energy_power
    # platform: numeric_state
    # below: '5.5'
  # condition:    
  # - condition: state
    # entity_id: switch.pracovna
    # state: 'on'       
  # action:
  # - delay: 00:02:00     
  # - service: switch.turn_off    
    # entity_id: switch.pracovna
  # - service: notify.mobile_app_samsung_s25
    # data: 
      # message: "Zasuvka v pracovni sa vypla {{ now().strftime('%H:%M:%S %A %d %B %Y') }}" 
      # data: 
        # ttl: 0
        # priority: high      
      
- id: TV zasuvka Vypnutie pod 25W
  alias: TV zasuvka Vypnutie pod 25W
  mode: queued
  trigger:
  - entity_id: sensor.tv_zasuvka_energy_power
    platform: numeric_state
    below: '25'
  condition:    
  - condition: state
    entity_id: switch.tv_zasuvka
    state: 'on'   
  action:
  - delay: "00:02:00"
  - condition: and
    conditions:
      - condition: numeric_state  
        entity_id: sensor.tv_zasuvka_energy_power
        below: '40'
      - condition: state  
        entity_id: switch.tv_zasuvka
        state: 'on'     
  - service: switch.turn_off  
    entity_id: switch.tv_zasuvka 
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "TV sa vypla {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"  
      data: 
        ttl: 0
        priority: high      



- id: Vypnutie pracky a susicky o polnoci
  alias: Vypnutie pracky a susicky o polnoci
  trigger:
  - at: "00:01:00"
    platform: time
  action:
    - service: switch.turn_off
      entity_id: 
      - switch.susicka_zasuvka_2
      
      
#####################################################  Vypinac WC

######## Ventilacka
- id: WC Ventilacka vypnutie po 1. minute
  alias: WC Ventilacka vypnutie po 1. minute
  mode: restart
  trigger:
  - entity_id: switch.wc_ventilacka
    from: 'off'
    platform: state
    to: 'on'
  action:
  - delay: 00:01:00 
  - service: switch.turn_off  
    entity_id: switch.wc_ventilacka

######## Svetlo
- id: WC Svetlo vypnutie po 30 min
  alias: WC Svetlo vypnutie po 30 min
  mode: restart
  trigger:
  - platform: state  
    entity_id: light.wc_svetlo
    to: 'on'
    for:
      minutes: 30
  action:
  - service: light.turn_off  
    entity_id: light.wc_svetlo    
    

    

    
####################################################### Radiator Spalna
######### ZAP
- id: Spalna - Zapnutie Kurenia pod 23 stupna 
  alias: Spalna - Zapnutie Kurenia pod 23 stupna 
  trigger:
    platform: time_pattern
    minutes: '/1' 
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "19:00:00"
        before: "08:00:00"  
#### Podmienka ze teplota na teplomery je mensia ako teplota pre radiator nastavena na Administration pre spalnu         
      - condition: template
        value_template: "{{ states('sensor.ble_temperature_4c65a8dfc04a')| float(0)|round(1) < states('input_number.radiator_spalna')| float(0)|round(1) }}"
#### Podmienka ze teplota na na riadore sa nerovna teplote pre radiator nastavena na Administration pre spalnu             
      - condition: template
        value_template: "{{ states('sensor.radiator_spalna_heat_setpoint')| float(0)|round(1) != states('input_number.radiator_spalna')| float(0)|round(1) }}"
      - condition: state
        entity_id: binary_sensor.0x00158d00054d661a_contact
        state: 'off'    
      - condition: state
        entity_id: binary_sensor.0x00158d00069b07d7_contact
        state: 'off'         
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
          - condition: state
            entity_id: device_tracker.samsung_s23
            state: 'home' 
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0xbc33acfffe37e579/set
      payload: '{"current_heating_setpoint":"{{ states.input_number.radiator_spalna.state | float(0)|round(1) }}"}'
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Spalna - Kurenie sa zaplo {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfc04a', 'mean')}} °C. "   
      data: 
        ttl: 0
        priority: high      
      
######### VYP Radiatora - TEPLOTA   
- id: Spalna - Vypnutie Kurenia nad 23 stupna
  alias: Spalna - Vypnutie Kurenia nad 23 stupna
  trigger:
    platform: time_pattern
    minutes: '/1'
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "19:00:00"
        before: "08:00:00" 
### Opacne ako v predchazajucej automatizacii 
      - condition: template
        value_template: "{{ states('sensor.ble_temperature_4c65a8dfc04a')| float(0)|round(1) > states('input_number.radiator_spalna')| float(0)|round(1) }}"
### Opacne ako v predchazajucej automatizacii         
      - condition: template
        value_template: "{{ states('sensor.radiator_spalna_heat_setpoint')| float(0)|round(1) == states('input_number.radiator_spalna')| float(0)|round(1) }}"         
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0xbc33acfffe37e579/set
      payload: '{"current_heating_setpoint":"5.0"}'  
      
######### VYP Radiatora -CAS
- id: Spalna - Vypnutie Kurenia po 9:00 
  alias: Spalna - Vypnutie Kurenia po 9:00
  trigger:
  - at: "09:00:00"
    platform: time
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0xbc33acfffe37e579/set
      payload: '{"current_heating_setpoint":"5.0"}'    
      
######### VYP Radiatora -Okno
- id: Spalna - Vypnutie Kurenia ak je otvorene okno
  alias: Spalna - Vypnutie Kurenia ak je otvorene okno
  trigger:
      - platform: state
        entity_id: binary_sensor.0x00158d00054d661a_contact
        from: "off"
        to: 'on'
        for: "00:02:00"
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0xbc33acfffe37e579/set
      payload: '{"current_heating_setpoint":"5.0"}'           
      

      
####################################################### Radiator Obyvacka      

######### ZAP
- id: Obyvacka - Zapnutie kurenia ked je zapnuta TV
  alias: Obyvacka - Zapnutie kurenia ked je zapnuta TV 
  trigger:
    platform: time_pattern
    minutes: '/1'  
  condition:
  - condition: and
    conditions:
      - condition: state
        entity_id: media_player.samsung
        state: 'on'
#### Podmienka ze teplota na teplomery je mensia ako teplota pre radiator nastavena na Administration pre obyvacku         
      - condition: template
        value_template: "{{ states('sensor.ble_temperature_4c65a8d0b9be')| float(0)|round(1) < states('input_number.radiator_obyvacka')| float(0)|round(1) }}"
#### Podmienka ze teplota na na riadore sa nerovna teplote pre radiator nastavena na Administration pre obyvacku            
      - condition: template
        value_template: "{{ states('sensor.radiator_obyvacka_heat_setpoint')| float(0)|round(1) != states('input_number.radiator_obyvacka')| float(0)|round(1) }}"     
      - condition: state
        entity_id: binary_sensor.0x00158d00054dafc8_contact
        state: 'off'   
      - condition: state
        entity_id: binary_sensor.0x00124b002269eafa_contact 
        state: 'off' 
      - condition: state
        entity_id: binary_sensor.0x00124b0022ed310a_contact
        state: 'off'  
      - condition: state
        entity_id: binary_sensor.0x00124b002266fd11_contact
        state: 'off'        
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x60a423fffea0fc8f/set
      payload: '{"current_heating_setpoint":"{{ states.input_number.radiator_obyvacka.state | float(0)|round(1) }}"}'      
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Obyvacka - Kurenie sa zaplo {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8d0b9be', 'mean')}} °C. "   
      data: 
        ttl: 0
        priority: high

######### VYP      
- id: Obyvacka - Vypnutie kurenia ked je teplota nad 24
  alias: Obyvacka - Vypnutie kurenia ked je teplota nad 24
  trigger:
    platform: time_pattern
    minutes: '/1' 
  condition:
### Opacne ako v predchazajucej automatizacii 
      - condition: template
        value_template: "{{ states('sensor.ble_temperature_4c65a8d0b9be')| float(0)|round(1) > states('input_number.radiator_obyvacka')| float(0)|round(1) }}"
### Opacne ako v predchazajucej automatizacii         
      - condition: template
        value_template: "{{ states('sensor.radiator_obyvacka_heat_setpoint')| float(0)|round(1) == states('input_number.radiator_obyvacka')| float(0)|round(1) }}"     
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x60a423fffea0fc8f/set
      payload: '{"current_heating_setpoint":"5.0"}'
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Obyvacka - Kurenie sa vyplo {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8d0b9be', 'mean')}} °C. "  
      data: 
        ttl: 0
        priority: high
        
######### VYP Radiatora -Okno
- id: Obyvacka - Vypnutie Kurenia ak je otvorene okno
  alias: Obyvacka - Vypnutie Kurenia ak je otvorene okno
  trigger:
      - platform: state
        entity_id: binary_sensor.0x00158d00054dafc8_contact
        from: "off"
        to: 'on'
        for: "00:02:00"
      - platform: state
        entity_id: binary_sensor.0x00124b002269eafa_contact
        from: "off"
        to: 'on'
        for: "00:02:00"
      - platform: state
        entity_id: binary_sensor.0x00124b0022ed310a_contact
        from: "off"
        to: 'on' 
        for: "00:02:00"
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x60a423fffea0fc8f/set
      payload: '{"current_heating_setpoint":"5.0"}'
      
######### ZAP
- id: Obyvacka - Notifikacia otvorenych dveri kvoli kureniu
  alias: Obyvacka - Notifikacia otvorenych dveri kvoli kureniu
  trigger:
    platform: time_pattern
    minutes: '/30'  
  condition:
  - condition: and
    conditions:
      - condition: state
        entity_id: media_player.samsung
        state: 'on'
      - condition: template
        value_template: "{{ states('sensor.ble_temperature_4c65a8d0b9be')| float(0)|round(1) < states('input_number.radiator_obyvacka')| float(0)|round(1) }}" 
      - condition: template
        value_template: "{{ states('sensor.radiator_obyvacka_heat_setpoint')| float(0)|round(1) != states('input_number.radiator_obyvacka')| float(0)|round(1) }}"    
      - condition: state
        entity_id: binary_sensor.0x00158d00054dafc8_contact
        state: 'off'   
      - condition: state
        entity_id: binary_sensor.0x00124b002269eafa_contact 
        state: 'off' 
      - condition: state
        entity_id: binary_sensor.0x00124b0022ed310a_contact
        state: 'off'  
      - condition: state
        entity_id: binary_sensor.0x00124b002266fd11_contact
        state: 'on'   
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Obyvacka - Ak chces aby sa kurenie zaplo chod zavriet dvere na chodbu.  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8d0b9be', 'mean')}} °C.  Cas {{ now().strftime('%H:%M:%S %A %d %B %Y') }} "   
      data: 
        ttl: 0
        priority: high   
  - service: notify.mobile_app_samsung_s23
    data: 
      message: "Obyvacka - Ak chces aby sa kurenie zaplo chod zavriet dvere na chodbu. Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8d0b9be', 'mean')}} °C.  Cas {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  "   
      data: 
        ttl: 0
        priority: high          
      
####################################################### Radiator Pracovna       
        
######### VYP Radiatora -CAS
- id: Pracovna - Vypnutie Kurenia po 17:00 
  alias: Pracovna - Vypnutie Kurenia po 17:00
  trigger:
  - at: "17:00:00"
    platform: time
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x60a423fffea3a842/set
      payload: '{"current_heating_setpoint":"5.0"}'            
      
 
############################### Nizka teplota v izbe 

- id: Spalna - Teplota pod 20 stupnov notif
  alias: Spalna - Teplota pod 20 stupnov notif
  trigger:
  - entity_id: sensor.ble_temperature_4c65a8dfc04a
    platform: numeric_state
    below: '20'  
  condition: 
  - condition: state
    entity_id: binary_sensor.0x00158d00054d661a_contact
    state: 'on'    
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Chod zavriet okno do spalne {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfc04a', 'mean')}} °C. "
      data: 
        ttl: 0
        priority: high
  - service: notify.mobile_app_samsung_s23
    data: 
      message: "Diana chod zavriet okno do spalne {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfc04a', 'mean')}} °C. "      
      
- id: Pracovna - Teplota pod 20 stupnov
  alias: Pracovna - Teplota pod 20 stupnov
  trigger:
  - entity_id: sensor.ble_temperature_4c65a8dfacaf
    platform: numeric_state
    below: '20'  
  condition: 
  - condition: state
    entity_id: binary_sensor.0x00158d00069acede_contact
    state: 'on'      
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Chod zavriet okno do pracovne {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfacaf', 'mean')}} °C. "
      data: 
        ttl: 0
        priority: high
  - service: notify.mobile_app_samsung_s23
    data: 
      message: "Diana chod zavriet okno do pracovne {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfacaf', 'mean')}} °C. "        
      
      
############################### Cistenie databazy


- id: Purge Database
  alias: Purge Database
  trigger:
  - at: "21:00:00"
    platform: time 
  action:
  - service: recorder.purge
    data:
      keep_days: 2
      repack: true
   
###############################   Kanvica zovrela voda



- id: Kanvica zovrela voda
  alias: Kanvica zovrela voda
  trigger:
  - entity_id: sensor.ble_temperature_ac9a22f296d0
    platform: numeric_state
    above: '90'
  condition:    
  - condition: state
    entity_id: binary_sensor.ble_switch_ac9a22f296d0
    state: 'on'       
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled_3
      effect: "Solid"
      brightness: '250'
      rgb_color: [255,0,0]          
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Android"
      brightness: '100'
      rgb_color: [255,0,0]
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Voda v rýchlovarnej kanvici zovrela. Choď zaliať čaj."
        cache: false 
  - delay: 00:00:10
  - service: light.turn_off  
    entity_id: light.wled          
  - delay: 00:00:45      
  - service: light.turn_off
    entity_id: light.wled_3
 
        
- id: Kanvica napoj je pripraveny
  alias: Kanvica napoj je pripraveny
  trigger:
  - entity_id: sensor.xiaomi_kettle_state
    platform: state
    from: "Kanvica zohrieva vodu"
    to: 'Kanvica je vypnuta'      
  - entity_id: sensor.xiaomi_kettle_state
    platform: state
    from: "Voda zovrela - udrziavam"
    to: 'Kanvica je vypnuta' 
  action: 
  - delay: 00:07:00   
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "čaj je pripravený."
        cache: false     
        
        
        


#####################################################  Leaving Home

- id: Leaving home
  alias: Leaving home
  trigger:
      - platform: state
        entity_id: group.telefony
        from: 'home'
        to: 'not_home'
        for:    
          minutes: 5
  action:
    - service: light.turn_off
      entity_id: light.obyvacka_hlavne_svetlo
    - delay: 00:00:02
    - service: light.turn_off
      entity_id: light.spalna_hlavne_svetlo
    - delay: 00:00:02
    - service: light.turn_off
      entity_id: light.wled_3
    - delay: 00:00:02
    - service: light.turn_off
      entity_id: light.pracovna_hlavne_svetlo  
    - delay: 00:00:02
    - service: light.turn_off  
      entity_id: light.wled         
    - delay: 00:00:02
    - service: switch.turn_off    
      entity_id: switch.tv_zasuvka   
    # - delay: 00:00:02
#    - service: switch.turn_off
#      entity_id: switch.obyvacka_predlzovacka  
    # - delay: 00:00:02
    # - service: switch.turn_off
      # entity_id: switch.pracovna
    - delay: 00:00:02
    - service: switch.turn_off
      entity_id: switch.kupelna_svetlo
    - delay: 00:00:02
    - service: switch.turn_off
      entity_id: switch.kupelna_ventilacka
    - delay: 00:00:02
    - service: switch.turn_off
      entity_id: light.wc_svetlo
    - delay: 00:00:02
    - service: switch.turn_off
      entity_id: switch.wc_ventilacka
    - delay: 00:00:02
    - service: media_player.turn_off
      entity_id: media_player.enigma2_media_player
    - delay: 00:00:02
    - service: mqtt.publish
      data:
        topic: zigbee2mqtt/0xbc33acfffe37e579/set
        payload: '{"current_heating_setpoint":"19.0"}'
    - delay: 00:00:01        
    - service: mqtt.publish
      data:
          topic: zigbee2mqtt/0x60a423fffea0fc8f/set
          payload: '{"current_heating_setpoint":"19.0"}' 
    - delay: 00:00:01           
    - service: mqtt.publish
      data:
          topic: zigbee2mqtt/0x60a423fffea3a842/set
          payload: '{"current_heating_setpoint":"19.0"}'           
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Leaving Home automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
        data: 
          ttl: 0
          priority: high        
        
- id: Leaving home - vysavac
  alias: Leaving home - vysavac
  trigger:
      - platform: state
        entity_id: group.telefony
        from: 'home'
        to: 'not_home'
        for:    
          minutes: 5        
  condition:
  - condition: time
    after: "09:00:00"
    before: '19:00:00'          
  action:  
    - service: vacuum.start
      entity_id: vacuum.xiaomi_vacuum_cleaner
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Vysavac sa zapol o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"  
        data: 
          ttl: 0
          priority: high      
          
- id: Vysavac - pravidelne vysavanie
  alias: Vysavac - pravidelne vysavanie
  trigger:
  - at: "14:00:00"
    platform: time  
  condition:
  - condition: state
    entity_id: group.telefony
    state: 'not_home'          
  action:  
    - service: vacuum.start
      entity_id: vacuum.xiaomi_vacuum_cleaner


        

     
      
#####################################################  Comming Home  
  
- id: Comming Home
  alias: Comming Home
  mode: single
  trigger:
      - platform: state
        entity_id: device_tracker.samsung_s25
        from: 'not_home'
        to: 'home'
        for: "00:02:00"   
      - platform: state
        entity_id: device_tracker.samsung_s23
        from: 'not_home'
        to: 'home'
        for: "00:02:00"         
  condition:    
  - condition: state
    entity_id: switch.tv_zasuvka
    state: 'off'   
  action:
    - service: vacuum.stop
      entity_id: vacuum.xiaomi_vacuum_cleaner  
    - delay: 00:00:05    
    - service: vacuum.return_to_base
      entity_id: vacuum.xiaomi_vacuum_cleaner     
    - delay: 00:02:00   
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Comming Home automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
        data: 
          ttl: 0
          priority: high 
    - service: tts.google_translate_say
      entity_id: media_player.living_room_speaker
      data_template:
         message: "Tvoj Domáci asistent ťa víta doma."
         cache: false    

#####################################################  Comming Home TV          
- id: Comming Home TV
  alias: Comming Home TV
  mode: single
  trigger:
      - platform: state
        entity_id: device_tracker.samsung_s25
        from: 'not_home'
        to: 'home'
        for: "00:02:00"    
      - platform: state
        entity_id: device_tracker.samsung_s23
        from: 'not_home'
        to: 'home'
        for: "00:02:00"       
  condition:
    condition: or  
    conditions:    
    - condition: time
      after: "17:00:00"
      before: "22:30:00"
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri  
    - condition: time
      after: "09:00:00"
      before: "22:30:00"
      weekday:
      - sat
      - sun
  action:
    - service: switch.turn_on
      entity_id: switch.tv_zasuvka       
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Comming Home TV automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
        data: 
          ttl: 0
          priority: high 

#####################################################  Comming Home Svetlo 
  
- id: Comming Home Svetlo
  alias: Comming Home Svetlo
  mode: single
  trigger:
      - platform: state
        entity_id: device_tracker.samsung_s25
        from: 'not_home'
        to: 'home'
        for: "00:02:00"   
      - platform: state
        entity_id: device_tracker.samsung_s23
        from: 'not_home'
        to: 'home'
        for: "00:02:00"    
  condition:
  - condition: and
    conditions:
      - condition: sun
        after: sunset
        after_offset: "-01:00:00" 
      - condition: state
        entity_id: light.obyvacka_lampa
        state: 'off'    
  action:
#    - service: switch.turn_on
#      entity_id: switch.obyvacka_predlzovacka
#    - delay: 00:01:00  
    - service: light.turn_on
      entity_id: light.obyvacka_lampa
    - service: notify.mobile_app_samsung_s25
      data: 
        message: "Comming Home Svetlo automatizacia spustena o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"      
        data: 
          ttl: 0
          priority: high     
          
#####################################################  Good Night       
          
  
- id: Good Night 
  alias: Good Night 
  mode: restart
  trigger:
      - platform: state
        entity_id: media_player.samsung
        to: 'off' 
  condition:
  - condition: time
    after: "22:30:00"
    before: "02:30:00"          
  action:
  - service: switch.turn_on
    entity_id:
      - switch.adaptive_lighting_sleep_mode_bodovky
      - switch.adaptive_lighting_sleep_mode_lampa_v_obyvacke 
      - switch.adaptive_lighting_sleep_mode_hlavne_svetla      
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x60a423fffea0fc8f/set
      payload: '{"current_heating_setpoint":"5.0"}'
  - delay: 00:01:00       
  - service: light.turn_off
    entity_id: 
    - light.obyvacka_lampa
    - light.obyvacka_hlavne_svetlo 
#  - service: switch.turn_off
#    entity_id: switch.router_zasuvka   #stromcek 
#  - service: light.turn_off
#    entity_id: light.wled_3    #vianocna parapeta 
#  - service: switch.turn_off
#    entity_id: switch.stara_pracovna  treba kupit novu zasuvku tato je na balkone      #vianocny balkon    
#  - delay: 00:00:05     
#  - service: switch.turn_off    
#    entity_id: switch.obyvacka_predlzovacka   
    
################################################################ Spalna postel

- id: Spalna Postel - Zapnutie
  alias: Spalna Postel - Zapnutie
  trigger:
  - platform: state
    entity_id: binary_sensor.ble_motion_senzor_pohybu_spalna
    to: 'on'
  - platform: state
    entity_id: binary_sensor.0x00158d0002e29c47_occupancy
    to: 'on'    
  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: state
      entity_id:
      - light.postel_led_pasik_2
      - light.spalna_hlavne_svetlo      
      state: 'off'
    - condition: or
      conditions:
        - condition: state
          entity_id: binary_sensor.ble_motion_senzor_pohybu_spalna
          state: 'on'
        - condition: state
          entity_id: binary_sensor.0x00158d0002e29c47_occupancy
          state: 'on'     
  action:
  - service: light.turn_on   
    entity_id: light.postel_led_pasik_2   

- id: Spalna Postel - Vypnutie
  alias: Spalna Postel - Vypnutie
  trigger:
  - platform: state
    entity_id: binary_sensor.ble_motion_senzor_pohybu_spalna
    to: 'off'
    for:
      seconds: 7      
  - platform: state
    entity_id: binary_sensor.0x00158d0002e29c47_occupancy
    to: 'off'  
    for:
      seconds: 7    
  condition:
    - condition: state
      entity_id: sun.sun
      state: 'below_horizon'
    - condition: or
      conditions:
        - condition: state
          entity_id: binary_sensor.ble_motion_senzor_pohybu_spalna
          state: 'off'
        - condition: state
          entity_id: binary_sensor.0x00158d0002e29c47_occupancy
          state: 'off'
  action:
  - service: light.turn_off   
    entity_id: light.postel_led_pasik_2   

################################################################ Spalna balkon

- id: Spalna Balkon - otvorenie
  alias: Spalna Balkon - otvorenie
  trigger:
      - platform: state
        entity_id: binary_sensor.0x00158d00069b07d7_contact
        from: "off"
        to: 'on'
  condition:
  - condition: sun
    after: sunset        
  action:
  - service: switch.turn_on
    entity_id: switch.balkon_zasuvka
    
- id: Spalna Balkon - zatvorenie
  alias: Spalna Balkon - zatvorenie
  trigger:
      - platform: state
        entity_id: binary_sensor.0x00158d00069b07d7_contact
        from: "on"
        to: 'off'
  action:
  - service: switch.turn_off
    entity_id: switch.balkon_zasuvka    
   
    

          
################################################################ LED Pasik - Stol 
          
- id: Stol Nocne Svetlo 23:00 - 08:00
  alias: Stol Nocne Svetlo 23:00 - 08:00
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0004494467_occupancy   
    to: 'on'
  - platform: state
    entity_id: binary_sensor.0x00158d0002753dcc_occupancy
    to: 'on'  
  - platform: state
    entity_id: binary_sensor.0x54ef4410005a9493_occupancy
    to: 'on'   
  condition:
  - condition: time
    after: "23:00:02"
    before: '06:59:59'
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Solid"
      brightness: 25
      rgb_color: [255,183,123]
  - delay: 00:01:00
  - service: light.turn_off  
    entity_id: light.wled  
    
################################################################ LED Pasik - Stol TEST
          

- id: Stol Pracka
  alias: Stol Pracka
  mode: restart
  trigger:
      - platform: state
        entity_id: sensor.washing_machine_washer_job_state
        from: 'spin'
        to: 'finish'
 
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Android"
      brightness: 100
      rgb_color: [0,126,255]
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Práčka doprala. Choď vybrať prádlo."
        cache: false       
  - delay: 00:00:20
  - service: light.turn_off  
    entity_id: light.wled      
    
- id: Stol Susicka
  alias: Stol Susicka
  mode: restart
  trigger:
  - entity_id: sensor.susicka_zasuvka_energy_power_2
    platform: numeric_state
    below: '2'
  condition:    
  - condition: state
    entity_id: switch.susicka_zasuvka_2
    state: 'on'  
  action:
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Android"
      brightness: 100
      rgb_color: [255,126,0]
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Sušička vysušila prádlo.  Choď vybrať prádlo."
        cache: false       
  - delay: 00:00:20
  - service: light.turn_off  
    entity_id: light.wled    
    
- id: Stol Dazd
  alias: Stol Dazd
  mode: restart
  trigger:
  - entity_id: weather.home  
    platform: state
    to: rainy
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "09:00:00"
        before: "23:00:00" 
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
          - condition: state
            entity_id: device_tracker.samsung_s23
            state: 'home' 
  action:
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Podľa predpovede sa zmenilo počasie, malo by začať pršať."
        cache: false         
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Rain"
      brightness: 100
      rgb_color: [63,255,0]
  - delay: 00:00:20
  - service: light.turn_off  
    entity_id: light.wled   
    
- id: Stol Sneh
  alias: Stol Sneh
  mode: restart
  trigger:
  - entity_id: weather.home  
    platform: state
    to: snowy
  - entity_id: weather.home  
    platform: state
    to: snowy-rainy    
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "09:00:00"
        before: "23:00:00" 
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
          - condition: state
            entity_id: device_tracker.samsung_s23
            state: 'home' 
  action:
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Podľa predpovede sa zmenilo počasie, malo by začať snežiť."
        cache: false         
  - service: light.turn_on
    data:
      entity_id: light.wled
      effect: "Rain"
      brightness: 100
      rgb_color: [63,255,0]
  - delay: 00:00:20
  - service: light.turn_off  
    entity_id: light.wled      

############################### Zimny rezim automatizacie
- id: zimny rezim - zapnuty
  alias: zimny rezim - zapnuty
  trigger:
    platform: state
    entity_id: input_boolean.zimny_rezim
    to: 'on'
  action:
  - service: automation.turn_on
    data:
        entity_id: 
        - automation.obyvacka_notifikacia_otvorenych_dveri_kvoli_kureniu
        - automation.obyvacka_vypnutie_kurenia_ak_je_otvorene_okno
        - automation.obyvacka_vypnutie_kurenia_ked_je_teplota_nad_24
        - automation.obyvacka_zapnutie_kurenia_ked_je_zapnuta_tv
        - automation.spalna_vypnutie_kurenia_ak_je_otvorene_okno
        - automation.spalna_vypnutie_kurenia_nad_23_stupna
        - automation.spalna_vypnutie_kurenia_po_9_00
        - automation.spalna_zapnutie_kurenia_pod_23_stupna
        
- id: zimny rezim - vypnuty
  alias: zimny rezim - vypnuty
  trigger:
    platform: state
    entity_id: input_boolean.zimny_rezim
    to: 'off'
  action:
  - service: automation.turn_off
    data:
        entity_id: 
        - automation.obyvacka_notifikacia_otvorenych_dveri_kvoli_kureniu
        - automation.obyvacka_vypnutie_kurenia_ak_je_otvorene_okno
        - automation.obyvacka_vypnutie_kurenia_ked_je_teplota_nad_24
        - automation.obyvacka_zapnutie_kurenia_ked_je_zapnuta_tv
        - automation.spalna_vypnutie_kurenia_ak_je_otvorene_okno
        - automation.spalna_vypnutie_kurenia_nad_23_stupna
        - automation.spalna_vypnutie_kurenia_po_9_00
        - automation.spalna_zapnutie_kurenia_pod_23_stupna

################################################################### Ovladac k svetlam 


- id: Zapnutie podsvietenie postele
  alias: Zapnutie podsvietenie postele 
  trigger:
      - platform: state
        entity_id: sensor.ble_remote_ovladac_spalna
        to: 'single press sun' 
  condition:
  - condition: state
    entity_id: light.spalna_hlavne_svetlo
    state: 'off'        
  action:
    - service: light.turn_on
      entity_id: light.postel_led_pasik_2
      
- id: Vypnutie podsvietenie postele
  alias: Vypnutie podsvietenie postele 
  trigger:
      - platform: state
        entity_id: sensor.ble_remote_ovladac_spalna
        to: 'single press m' 
  condition:
  - condition: state
    entity_id: light.spalna_hlavne_svetlo
    state: 'off'        
  action:
    - service: light.turn_off
      entity_id: light.postel_led_pasik_2      
      
# - id: Zapnutie zasuvky pracovna cez ovladac
  # alias: Zapnutie zasuvky pracovna cez ovladac
  # trigger:
      # - platform: state
        # entity_id: sensor.ble_remote_ovladac_pracovna
        # to: 'single press sun' 
  # condition:
  # - condition: state
    # entity_id: light.pracovna_hlavne_svetlo
    # state: 'off'        
  # action:
    # - service: switch.turn_on
      # entity_id: switch.pracovna
      
# - id: Vypnutie zasuvky pracovna cez ovladac
  # alias: Vypnutie zasuvky pracovna cez ovladac
  # trigger:
      # - platform: state
        # entity_id: sensor.ble_remote_ovladac_pracovna
        # to: 'single press m' 
  # condition:
  # - condition: state
    # entity_id: light.pracovna_hlavne_svetlo
    # state: 'off'        
  # action:
    # - service: switch.turn_off
      # entity_id: switch.pracovna
            

####################################################### Klimatizacia
######### Spalna
- id: Spalna - Zapnutie Klimatizacie nad 25 stupnov
  alias: Spalna - Zapnutie Klimatizacie nad 25 stupnov
  trigger:
    platform: time_pattern
    minutes: '/1' 
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "22:00:00"
        before: "23:30:00" 
      - condition: numeric_state
        entity_id: sensor.ble_temperature_4c65a8dfc04a
        above: '25' 
      - condition: state
        entity_id: binary_sensor.0x00158d00054d661a_contact
        state: 'off'   
      - condition: state
        entity_id: climate.bedroom_a_c
        state: 'off'         
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
          - condition: state
            entity_id: device_tracker.samsung_s23
            state: 'home' 
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.bedroom_a_c
      hvac_mode: cool
      temperature: '23' 
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Spalna - Klimatizacia sa zapla {{ now().strftime('%H:%M:%S %A %d %B %Y') }}  Aktualna teplota je {{state_attr('sensor.ble_temperature_4c65a8dfc04a', 'mean')}} °C. "   
      data: 
        ttl: 0
        priority: high    
  - delay: 01:00:00  
  - service: switch.turn_on
    entity_id: switch.bedroom_a_c_spi_mode
    
 
        

###################################### Dovolenkovy rezim svetla
- id: Dovolenkovy rezim svetla
  alias: Dovolenkovy rezim svetla
  mode: restart
  trigger:
      - platform: sun
        event: 'sunset'
  action:
    - delay: 01:00:00  
    - service: light.turn_on
      entity_id: light.obyvacka_lampa
    - delay: 01:00:00
    - service: light.turn_off
      entity_id: light.obyvacka_lampa  
    - delay: 00:05:00
    - service: light.turn_on
      entity_id: light.spalna_hlavne_svetlo
    - delay: 00:05:00  
    - service: light.turn_off
      entity_id: light.spalna_hlavne_svetlo  

###################################### Dovolenkovy rezim pohyb
- id: Dovolenkovy rezim pohyb
  alias: Dovolenkovy rezim pohyb
  mode: restart
  trigger:
  - platform: state
    entity_id: binary_sensor.0x00158d0004494467_occupancy   
    to: 'on'
  - platform: state
    entity_id: binary_sensor.0x00158d0002753dcc_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.0x54ef4410005a9493_occupancy    
    to: 'on' 
  - platform: state
    entity_id: binary_sensor.0x00158d0002e29c47_occupancy
    to: 'on'
  - platform: state
    entity_id: binary_sensor.ble_motion_senzor_pohybu_spalna    
    to: 'on'  
  - platform: state
    entity_id: binary_sensor.everything_presence_lite_6acba0_zone_1_occupancy    
    to: 'on'     
    
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Pohyb v byte {{ trigger.from_state.attributes.friendly_name }} o {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high     

############################### Dovolenkovy rezim automatizacie
- id: dovolenkovy rezim - zapnuty
  alias: dovolenkovy rezim - zapnuty
  trigger:
    platform: state
    entity_id: input_boolean.dovolenkovy_rezim
    to: 'on'
  action:
  - service: automation.turn_on
    data:
        entity_id: 
        - automation.dovolenkovy_rezim_svetla
        - automation.dovolenkovy_rezim_pohyb        

        
- id: dovolenkovy rezim - vypnuty
  alias: dovolenkovy rezim - vypnuty
  trigger:
    platform: state
    entity_id: input_boolean.dovolenkovy_rezim
    to: 'off'
  action:
  - service: automation.turn_off
    data:
        entity_id: 
        - automation.dovolenkovy_rezim_svetla
        - automation.dovolenkovy_rezim_pohyb 
        
        
####################################################### Zaluzie 
######### Zatiahnut so zapadom slnka
- id: Zaluzie_zimny_rezim_zatvorenie
  alias: Zaluzie_zimny_rezim_zatvorenie
  trigger:
      - platform: sun
        event: 'sunset'
  action:
#  - service: mqtt.publish
#    data:
#      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
#      payload: '{"position":"0"}'
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x54ef441000450603/set
      payload: '{"position": 0}'  
      
######### Vytiahnut s vychodom slnka - Pracovna
#- id: Zaluzie_zimny_rezim_otvorenie_pracovna
#  alias: Zaluzie_zimny_rezim_otvorenie_pracovna
#  trigger:
#      - platform: sun
#        event: 'sunrise'
#  condition:
#  - condition: state
#    entity_id: input_boolean.zimny_rezim
#    state: 'on'          
#  action:
#  - service: mqtt.publish
#    data:
#      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
#      payload: '{"position":"100"}'
#  - delay: 00:00:35   
#  - service: mqtt.publish
#    data:
#      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
#      payload: '{"position":"95"}'  

######### Vytiahnut s 10:00 slnka - Spalna
- id: Zaluzie_zimny_rezim_otvorenie_spalna
  alias: Zaluzie_zimny_rezim_otvorenie_spalna
  trigger:
  - at: "10:00:00"
    platform: time
  condition:
  - condition: state
    entity_id: input_boolean.zimny_rezim
    state: 'on'          
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x54ef441000450603/set
      payload: '{"position":100}'
  - delay: 00:00:35   
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x54ef441000450603/set
      payload: '{"position":95}'        
            
      
######### Zaluzie dolne otvorenie
- id: Zaluzie_otvorenie_tlacidlo
  alias: Zaluzie_otvorenie_tlacidlo
  trigger:
    platform: state
    entity_id: input_boolean.zaluzie_otvorenie
    from: 'off'
    to: 'on'
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
      payload: '{"position":"0"}'
  - delay: 00:00:35
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
      payload: '{"position":"4"}'
      
######### Zaluzie horne otvorenie
- id: Zaluzie_horne_otvorenie_tlacidlo
  alias: Zaluzie_horne_otvorenie_tlacidlo
  trigger:
    platform: state
    entity_id: input_boolean.zaluzie_horne_otvorenie
    from: 'off'
    to: 'on'
  action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
      payload: '{"position":"100"}'
  - delay: 00:00:35
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/0x5c0272fffedfd8a2/set
      payload: '{"position":"97"}'      
      
######### Zaluzie nastavenie dolne tlacidla
- id: Zaluzie_nastavenie_tlacidla
  alias: Zaluzie_nastavenie_tlacidla
  trigger:
    platform: numeric_state
    entity_id: sensor.pozicia_zaluzie
    above: '4'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.zaluzie_otvorenie
    
######### Zaluzie nastavenie horne tlacidla
- id: Zaluzie_nastavenie_horneho_tlacidla
  alias: Zaluzie_nastavenie_horneho_tlacidla
  trigger:
    platform: numeric_state
    entity_id: sensor.pozicia_zaluzie
    below: '95'
  action:
  - service: input_boolean.turn_off
    entity_id: input_boolean.zaluzie_horne_otvorenie  
    
 
    
    
###################### Vianocne osvetlenie balkon
- id: Balkon - zmena efektu
  alias: Balkon - zmena efektu
  trigger:
    platform: time_pattern
    minutes: /5
  condition:
  - condition: and
    conditions:
    - condition: sun
      after: sunset
    - condition: state
      entity_id: light.wled_2
      state: 'on'
  action:
  - service: light.turn_on
    target:
      entity_id: light.wled_2
    data:
      effect: '{{ state_attr(''light.wled_2'', ''effect_list'') | random }}'
      
###################### Vypinac Kuchyna
###########Prave 
- id: Vypinac Kuchyna Prave tlacidlo
  alias: Vypinac Kuchyna Prave tlacidlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d00065038cd/action
      payload: "single_right"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: group.kuchyna
 

###########Lave 
- id: Vypinac Kuchyna Lave tlacidlo
  alias: Vypinac Kuchyna Lave tlacidlo
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d00065038cd/action
      payload: "single_left"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: light.obyvacka_hlavne_svetlo 

########################################## Radiatory Nastavenie lokalnej teploty

- id: Radiator - Obyvacka - Teplota
  alias: Radiator - Obyvacka - Teplota
  description: ''
  use_blueprint:
    path: mmackowiak/sync_trv_with_external_sensor.yaml
    input:
      valve: climate.0x60a423fffea0fc8f
      temp_sensor: sensor.ble_temperature_4c65a8d0b9be    

- id: Radiator - Spalna - Teplota
  alias: Radiator - Spalna - Teplota
  description: ''
  use_blueprint:
    path: mmackowiak/sync_trv_with_external_sensor.yaml
    input:
      valve: climate.0xbc33acfffe37e579
      temp_sensor: sensor.ble_temperature_4c65a8dfc04a   

- id: Radiator - Pracovna - Teplota
  alias: Radiator - Spalna - Teplota
  description: ''
  use_blueprint:
    path: mmackowiak/sync_trv_with_external_sensor.yaml
    input:
      valve: climate.0x60a423fffea3a842
      temp_sensor: sensor.ble_temperature_4c65a8dfacaf
      
########################################## Vypnutie Sleep Adaptive Lighting 
- id: Sleep Adaptive Lighting - Vypnutie
  alias: Sleep Adaptive Lighting - Vypnutie
  trigger:
  - at: "07:30:00"
    platform: time
  action:
  - service: switch.turn_off
    entity_id:
      - switch.adaptive_lighting_sleep_mode_bodovky
      - switch.adaptive_lighting_sleep_mode_lampa_v_obyvacke 
      - switch.adaptive_lighting_sleep_mode_hlavne_svetla          

########################################## Vysavac 

######################Notifikacie
- id: Vysavac - Notifikacie - Hlavna Kefa 
  alias: Vysavac - Notifikacie - Hlavna Kefa
  mode: restart
  trigger:
    platform: numeric_state
    entity_id: sensor.xiaomi_vacuum_cleaner_main_brush_left
    below: '1'
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Vysavac - vymen alebo vycisti hlavnu kefu {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high   
        

- id: Vysavac - Notifikacie - Bocna Kefa 
  alias: Vysavac - Notifikacie - Bocna Kefa
  mode: restart
  trigger:
    platform: numeric_state
    entity_id: sensor.xiaomi_vacuum_cleaner_side_brush_left
    below: '1'
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Vysavac - vymen alebo vycisti bocnu kefu {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high           

- id: Vysavac - Notifikacie - Filter 
  alias: Vysavac - Notifikacie - Filter
  mode: restart
  trigger:
    platform: numeric_state
    entity_id: sensor.xiaomi_vacuum_cleaner_filter_left
    below: '1'
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Vysavac - vymen alebo vycisti filter {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high   
        
- id: Vysavac - Notifikacie - Senzor 
  alias: Vysavac - Notifikacie - Senzor
  mode: restart
  trigger:
    platform: numeric_state
    entity_id: sensor.xiaomi_vacuum_cleaner_sensor_dirty_left
    below: '1'
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Vysavac - vycisti senzory {{ now().strftime('%H:%M:%S %A %d %B %Y') }}"
      data: 
        ttl: 0
        priority: high    
        
###################### Zony

# 01 - Kuchyna
# 17 - Chodba
# 19 - Obyvacka
# 20 - Spalna
# 21 - Pracovna

- id: Vypinac Spalna Dvojklik Vysavac
  alias: Vypinac Spalna Dvojklik Vysavac
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002b45642/action
      payload: "double_right"
      value_template: "{{ value }}"
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 20
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
     
- id: Vypinac Pracovna Dvojklik Vysavac
  alias: Vypinac Pracovna Dvojklik Vysavac
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d000650329f/action
      payload: "double_right"
      value_template: "{{ value }}"
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 21
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
    
          
     

- id: Vypinac Obyvacka Dvojklik Vysavac
  alias: Vypinac Obyvacka Dvojklik Vysavac
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d0002afe6a9/action
      payload: "double_right"
      value_template: "{{ value }}"
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 19
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
 
     
- id: Vypinac Kuchyna Dvojklik Vysavac
  alias: Vypinac Kuchyna Dvojklik Vysavac
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d00065038cd/action
      payload: "double_right"
      value_template: "{{ value }}"
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 1
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner     


#####################################################   Vysavanie izieb cez UI 


- id: Vysavanie - Spalna
  alias: Vysavanie - Spalna
  trigger:
  - platform: state
    entity_id: input_boolean.vysavanie_spalna
    to: 'on'
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 20
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
     
- id: Vysavanie - Pracovna
  alias: Vysavanie - Pracovna
  trigger:
  - platform: state
    entity_id: input_boolean.vysavanie_pracovna
    to: 'on'
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 21
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
    

- id: Vysavanie - Obyvacka
  alias: Vysavanie - Obyvacka
  trigger:
  - platform: state
    entity_id: input_boolean.vysavanie_obyvacka
    to: 'on'
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 19
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner
 
- id: Vysavanie - Kuchyna
  alias: Vysavanie - Kuchyna
  trigger:
  - platform: state
    entity_id: input_boolean.vysavanie_kuchyna
    to: 'on'
  action:
  - service: xiaomi_miio.vacuum_clean_segment
    data:
     segments: 1
    target:
     entity_id: vacuum.xiaomi_vacuum_cleaner      
     
- id: Vypnutie zonoveho vysavania
  alias: Vypnutie zonoveho vysavania
  trigger:
  - platform: state
    entity_id: input_boolean.vysavanie_kuchyna
    to: 'off'
  - platform: state
    entity_id: input_boolean.vysavanie_pracovna
    to: 'off'
  - platform: state
    entity_id: input_boolean.vysavanie_spalna
    to: 'off'
  - platform: state
    entity_id: input_boolean.vysavanie_obyvacka
    to: 'off'    
  action:
    - service: vacuum.stop
      entity_id: vacuum.xiaomi_vacuum_cleaner  
    - delay: 00:00:01    
    - service: vacuum.return_to_base
      entity_id: vacuum.xiaomi_vacuum_cleaner     
     
    
    
######### Notifikacia Obyvacka
- id: Obyvacka - vetranie - otvor okno
  alias: Obyvacka - vetranie - otvor okno 
  trigger:
    platform: time_pattern
    minutes: '/1' 
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "09:00:00"
        before: "23:00:00"  
      - condition: template
        value_template: "{{ states('sensor.0x00158d00025e9bcf_temperature')| float(0) | round(1) < states('sensor.ble_temperature_4c65a8d0b9be')| float(0)| round(1)  }}"
      - condition: template
        value_template: "{{ (states('sensor.ble_temperature_4c65a8d0b9be')| float(0) | round(1) - states('sensor.0x00158d00025e9bcf_temperature')| float(0)| round(1)) > 2  }}"
      - condition: state
        entity_id: binary_sensor.0x00158d00054dafc8_contact
        state: 'off'
      - condition: state
        entity_id: input_boolean.zimny_rezim
        state: 'off'           
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Otvor okno v obyvacke   Aktualna teplota vonku je {{states('sensor.0x00158d00025e9bcf_temperature')}} °C a vnutri je {{states('sensor.ble_temperature_4c65a8d0b9be')}} °C   {{ now().strftime('%H:%M:%S %A %d %B %Y') }} "   
      data: 
        ttl: 0
        priority: high  
  
- id: Obyvacka - vetranie - zatvor okno
  alias: Obyvacka - vetranie - zatvor okno
  trigger:
    platform: time_pattern
    minutes: '/1' 
  condition:
  - condition: and
    conditions:
      - condition: time
        after: "09:00:00"
        before: "23:00:00"  
      - condition: template
        value_template: "{{ states('sensor.0x00158d00025e9bcf_temperature')| float(0) | round(1) > states('sensor.ble_temperature_4c65a8d0b9be')| float(0)| round(1)  }}"
      - condition: state
        entity_id: binary_sensor.0x00158d00054dafc8_contact
        state: 'on'
      - condition: state
        entity_id: input_boolean.zimny_rezim
        state: 'off'           
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
  action:
  - service: notify.mobile_app_samsung_s25
    data: 
      message: "Zatvor okno v obyvacke   Aktualna teplota vonku je {{states('sensor.0x00158d00025e9bcf_temperature')}} °C a vnutri je {{states('sensor.ble_temperature_4c65a8d0b9be')}} °C   {{ now().strftime('%H:%M:%S %A %d %B %Y') }} " 
      data: 
        ttl: 0
        priority: high  


      

- id: WC Svetlo ziarovka cez MQTT
  alias: WC Svetlo ziarovka cez MQTT
  mode: restart
  trigger:
    platform: mqtt
    topic: 'stat/WC/RESULT'  # Téma MQTT správy
  condition:
    - condition: template
      value_template: "{{ trigger.payload_json.get('Button1', {}).get('Action') == 'SINGLE' }}"  # Bezpečnejšie overenie správy z MQTT
  action:
    - choose:
      - conditions:
        - condition: template
          value_template: "{{ is_state('light.wc_svetlo', 'off') }}"  # Kontrola, či je svetlo vypnuté
        sequence:
          - service: light.turn_on
            entity_id: light.wc_svetlo
          - service: >
              {% if '08:00' <= now().strftime('%H:%M') <= '22:00' %}
                xiaomi_miio.light_set_scene
              {% else %}
                xiaomi_miio.light_set_scene
              {% endif %}
            data:
              scene: >
                {% if '08:00' <= now().strftime('%H:%M') <= '22:00' %}
                  1
                {% else %}
                  4
                {% endif %}
            entity_id: light.wc_svetlo
      - conditions:
        - condition: template
          value_template: "{{ is_state('light.wc_svetlo', 'on') }}"  # Kontrola, či je svetlo zapnuté
        sequence:
          - service: light.turn_off
            entity_id: light.wc_svetlo
    
     
#####################################################  Kvety
  
        
- id: Poliat Kvet Calathea
  alias: Poliat Kvet Calathea
  mode: restart
  trigger:
  - at: "20:00:00"
    platform: time
  condition:
  - condition: and
    conditions:
      - condition: numeric_state
        entity_id: sensor.calathea_pracovna_soil_moisture
        below: 18
      - condition: or
        conditions:    
          - condition: state
            entity_id: device_tracker.samsung_s25
            state: 'home'       
          - condition: state
            entity_id: device_tracker.samsung_s23
            state: 'home' 
  action:
  - service: tts.google_translate_say
    entity_id: media_player.living_room_speaker
    data_template:
        message: "Vlhkosť v pôde kvetu Kalatea poklesla pod 18 %. Choď poliať kvet v pracovni."
        cache: false 
        
  
#####################################################   Pracovna Zasuvka-Tlacidlo     
        
- id: Tlacidlo Pracovna Stol
  alias: Tlacidlo Pracovna Stol
  trigger:
    - platform: mqtt
      topic: zigbee2mqtt/0x00158d008b444846/action
      payload: "single"
      value_template: "{{ value }}"
  action:
    service: homeassistant.toggle
    entity_id: switch.klimatizacia_zasuvka    #####  je to zasuvka pre PC   
        
        





      


